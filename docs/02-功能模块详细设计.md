# lnk.day åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

## ç›®å½•
1. [URL çŸ­é“¾æ¥æ¨¡å—](#1-url-çŸ­é“¾æ¥æ¨¡å—)
2. [è¥é”€æ´»åŠ¨ç®¡ç†æ¨¡å—](#2-è¥é”€æ´»åŠ¨ç®¡ç†æ¨¡å—)
3. [äºŒç»´ç ç”Ÿæˆæ¨¡å—](#3-äºŒç»´ç ç”Ÿæˆæ¨¡å—)
4. [ç€é™†é¡µé¢æ¨¡å—](#4-ç€é™†é¡µé¢æ¨¡å—)
5. [æ•°æ®åˆ†ææ¨¡å—](#5-æ•°æ®åˆ†ææ¨¡å—)
6. [ç”¨æˆ·è®¤è¯ä¸æƒé™æ¨¡å—](#6-ç”¨æˆ·è®¤è¯ä¸æƒé™æ¨¡å—)
7. [API æœåŠ¡æ¨¡å—](#7-api-æœåŠ¡æ¨¡å—)

---

## 1. URL çŸ­é“¾æ¥æ¨¡å—

### 1.1 æ¨¡å—æ¦‚è¿°
æä¾›é«˜æ€§èƒ½çš„ URL ç¼©çŸ­ã€ç®¡ç†å’Œæ™ºèƒ½è·³è½¬æœåŠ¡ã€‚

### 1.2 åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 1.2.1 é“¾æ¥åˆ›å»º

**è¾“å…¥å‚æ•°**
```json
{
  "long_url": "https://example.com/very/long/url?param1=value1&param2=value2",
  "domain": "lnk.day",              // å¯é€‰ï¼Œé»˜è®¤ lnk.day
  "custom_slug": "my-link",          // å¯é€‰ï¼Œè‡ªå®šä¹‰çŸ­é“¾åç¼€
  "title": "æˆ‘çš„è¥é”€æ´»åŠ¨",            // å¯é€‰ï¼Œé“¾æ¥æ ‡é¢˜
  "tags": ["marketing", "2024"],     // å¯é€‰ï¼Œæ ‡ç­¾
  "folder_id": "123",                // å¯é€‰ï¼Œå½’å±æ–‡ä»¶å¤¹
  "expire_at": "2024-12-31T23:59:59Z", // å¯é€‰ï¼Œè¿‡æœŸæ—¶é—´
  "password": "secret123",           // å¯é€‰ï¼Œè®¿é—®å¯†ç 
  "utm_params": {                    // å¯é€‰ï¼ŒUTM å‚æ•°
    "source": "wechat",
    "medium": "social",
    "campaign": "winter_sale"
  }
}
```

**å¤„ç†æµç¨‹**
1. éªŒè¯ long_url æ ¼å¼å’Œå¯è®¿é—®æ€§
2. æ£€æŸ¥è‡ªå®šä¹‰ slug æ˜¯å¦å·²è¢«å ç”¨
3. å¦‚æ— è‡ªå®šä¹‰ slugï¼Œç”ŸæˆéšæœºçŸ­ç ï¼ˆbase62 ç¼–ç ï¼Œ6-8 ä½ï¼‰
4. ä¿å­˜é“¾æ¥ä¿¡æ¯åˆ°æ•°æ®åº“
5. è¿”å›çŸ­é“¾æ¥

**è¾“å‡ºç»“æœ**
```json
{
  "id": "link_abc123",
  "short_url": "https://lnk.day/my-link",
  "long_url": "https://example.com/very/long/url",
  "created_at": "2024-01-15T10:30:00Z",
  "qr_code_url": "https://api.lnk.day/qr/link_abc123.png"
}
```

**å¼‚å¸¸å¤„ç†**
- æ— æ•ˆ URLï¼šè¿”å› 400 Bad Request
- Slug å·²å ç”¨ï¼šè¿”å› 409 Conflict
- é…é¢è¶…é™ï¼šè¿”å› 429 Too Many Requests

#### 1.2.2 æ™ºèƒ½è·³è½¬

**è®¿é—®æµç¨‹**
```
ç”¨æˆ·è®¿é—®çŸ­é“¾æ¥
  â†“
æå–çŸ­ç  â†’ æŸ¥è¯¢æ•°æ®åº“
  â†“
æ£€æŸ¥é“¾æ¥çŠ¶æ€ï¼ˆæ˜¯å¦è¿‡æœŸ/åˆ é™¤ï¼‰
  â†“
æ£€æŸ¥è®¿é—®æƒé™ï¼ˆå¯†ç ä¿æŠ¤ï¼‰
  â†“
åº”ç”¨è·³è½¬è§„åˆ™ï¼ˆåœ°ç†/è®¾å¤‡/æ—¶é—´å®šå‘ï¼‰
  â†“
è®°å½•è®¿é—®æ•°æ®ï¼ˆå¼‚æ­¥ï¼‰
  â†“
302/301 é‡å®šå‘åˆ°ç›®æ ‡ URL
```

**å®šå‘è§„åˆ™ç¤ºä¾‹**
```json
{
  "rules": [
    {
      "type": "geo",
      "condition": {"country": "CN", "region": "Beijing"},
      "target_url": "https://example.com/beijing-offer"
    },
    {
      "type": "device",
      "condition": {"os": "iOS"},
      "target_url": "https://apps.apple.com/app/id123"
    },
    {
      "type": "time",
      "condition": {"start": "2024-01-01", "end": "2024-01-31"},
      "target_url": "https://example.com/january-sale"
    }
  ],
  "default_url": "https://example.com"
}
```

#### 1.2.3 æ‰¹é‡æ“ä½œ

**æ‰¹é‡åˆ›å»ºï¼ˆCSV å¯¼å…¥ï¼‰**

è¾“å…¥ CSV æ ¼å¼ï¼š
```csv
long_url,custom_slug,title,tags
https://example.com/product1,prod1,äº§å“1,product;sale
https://example.com/product2,prod2,äº§å“2,product;new
```

å¤„ç†é€»è¾‘ï¼š
- å¼‚æ­¥å¤„ç†ï¼ˆåå°ä»»åŠ¡ï¼‰
- é€è¡ŒéªŒè¯å’Œåˆ›å»º
- ç”Ÿæˆå¤„ç†æŠ¥å‘Šï¼ˆæˆåŠŸ/å¤±è´¥ç»Ÿè®¡ï¼‰
- é‚®ä»¶é€šçŸ¥å®ŒæˆçŠ¶æ€

**æ‰¹é‡å¯¼å‡º**

è¾“å‡º CSV æ ¼å¼ï¼š
```csv
short_url,long_url,title,clicks,created_at
https://lnk.day/abc,https://example.com,æ ‡é¢˜1,1234,2024-01-15
https://lnk.day/xyz,https://example.com,æ ‡é¢˜2,567,2024-01-16
```

#### 1.2.4 A/B æµ‹è¯•

**é…ç½®ç¤ºä¾‹**
```json
{
  "link_id": "link_abc123",
  "test_name": "é¦–é¡µæ–¹æ¡ˆ A vs B",
  "variants": [
    {
      "name": "æ–¹æ¡ˆ A",
      "target_url": "https://example.com/version-a",
      "traffic_percentage": 50
    },
    {
      "name": "æ–¹æ¡ˆ B",
      "target_url": "https://example.com/version-b",
      "traffic_percentage": 50
    }
  ],
  "tracking_goals": ["purchase", "signup"]
}
```

**æµé‡åˆ†é…ç®—æ³•**
- åŸºäºç”¨æˆ· IP çš„ä¸€è‡´æ€§å“ˆå¸Œ
- ç¡®ä¿åŒä¸€ç”¨æˆ·å§‹ç»ˆçœ‹åˆ°åŒä¸€ç‰ˆæœ¬
- æ”¯æŒæŒ‰ç™¾åˆ†æ¯”åŠ¨æ€è°ƒæ•´æµé‡

#### 1.2.5 Mobile Deep Linksï¼ˆç§»åŠ¨æ·±åº¦é“¾æ¥ï¼‰

**åŠŸèƒ½æ¦‚è¿°**
Mobile Deep Links å…è®¸çŸ­é“¾æ¥æ™ºèƒ½è¯†åˆ«ç”¨æˆ·è®¾å¤‡ï¼Œè‡ªåŠ¨è·³è½¬åˆ°å¯¹åº”çš„ç§»åŠ¨åº”ç”¨å†…éƒ¨é¡µé¢ï¼Œæˆ–åœ¨åº”ç”¨æœªå®‰è£…æ—¶è·³è½¬åˆ°åº”ç”¨å•†åº—ã€‚

**é…ç½®ç¤ºä¾‹**
```json
{
  "link_id": "link_abc123",
  "deep_link_config": {
    "enabled": true,
    "ios": {
      "app_store_id": "123456789",
      "app_store_url": "https://apps.apple.com/app/id123456789",
      "universal_link": "https://example.com/product/123",
      "custom_scheme": "myapp://product/123",
      "fallback_url": "https://example.com/product/123",
      "minimum_version": "2.0.0"
    },
    "android": {
      "package_name": "com.example.myapp",
      "play_store_url": "https://play.google.com/store/apps/details?id=com.example.myapp",
      "app_link": "https://example.com/product/123",
      "custom_scheme": "myapp://product/123",
      "fallback_url": "https://example.com/product/123",
      "minimum_version": "20"
    },
    "fallback_behavior": "app_store",  // app_store | web_fallback | smart
    "attribution": {
      "enabled": true,
      "deferred_deep_link": true,
      "attribution_window_days": 30
    }
  }
}
```

**è·³è½¬æµç¨‹**
```
ç”¨æˆ·ç‚¹å‡»çŸ­é“¾æ¥
  â†“
æ£€æµ‹ç”¨æˆ·è®¾å¤‡ç±»å‹å’Œæ“ä½œç³»ç»Ÿ
  â†“
iOS è®¾å¤‡:
  â”œâ”€ å°è¯• Universal Link æ‰“å¼€ App
  â”œâ”€ å¤±è´¥ â†’ å°è¯• Custom Scheme
  â””â”€ å¤±è´¥ â†’ è·³è½¬ App Store æˆ– Fallback URL
  â†“
Android è®¾å¤‡:
  â”œâ”€ å°è¯• App Link æ‰“å¼€ App
  â”œâ”€ å¤±è´¥ â†’ å°è¯• Intent URL
  â””â”€ å¤±è´¥ â†’ è·³è½¬ Play Store æˆ– Fallback URL
  â†“
æ¡Œé¢è®¾å¤‡:
  â””â”€ ç›´æ¥è·³è½¬ Fallback URL
```

**æ”¯æŒçš„åŠŸèƒ½**
1. **Universal Links (iOS)**
   - æ”¯æŒ iOS 9+ çš„åŸç”Ÿæ·±åº¦é“¾æ¥
   - æ— éœ€ App å®‰è£…å³å¯è¯†åˆ«
   - AASA æ–‡ä»¶è‡ªåŠ¨æ‰˜ç®¡

2. **App Links (Android)**
   - æ”¯æŒ Android 6+ çš„åŸç”Ÿæ·±åº¦é“¾æ¥
   - Digital Asset Links éªŒè¯
   - è‡ªåŠ¨ç”Ÿæˆ assetlinks.json

3. **Deferred Deep Linkingï¼ˆå»¶è¿Ÿæ·±åº¦é“¾æ¥ï¼‰**
   - ç”¨æˆ·é¦–æ¬¡å®‰è£… App åä¿æŒè·³è½¬ä¸Šä¸‹æ–‡
   - æ”¯æŒ 30 å¤©å½’å› çª—å£
   - å®‰è£…åè‡ªåŠ¨è·³è½¬åˆ°ç›®æ ‡é¡µé¢

4. **Attributionï¼ˆå½’å› åˆ†æï¼‰**
   - è¿½è¸ªå®‰è£…æ¥æº
   - æ”¯æŒå¤šè§¦ç‚¹å½’å› 
   - ä¸è¥é”€æ´»åŠ¨å…³è”

**API ç«¯ç‚¹**
```
POST   /links/{id}/deep-link          é…ç½®æ·±åº¦é“¾æ¥
GET    /links/{id}/deep-link          è·å–æ·±åº¦é“¾æ¥é…ç½®
PUT    /links/{id}/deep-link          æ›´æ–°æ·±åº¦é“¾æ¥é…ç½®
DELETE /links/{id}/deep-link          åˆ é™¤æ·±åº¦é“¾æ¥é…ç½®
```

#### 1.2.6 é«˜çº§é“¾æ¥æœç´¢ä¸ç­›é€‰

**æœç´¢å‚æ•°**
```json
{
  "query": "è¥é”€æ´»åŠ¨",              // å…¨æ–‡æœç´¢ï¼ˆæ ‡é¢˜ã€æ ‡ç­¾ã€URLï¼‰
  "filters": {
    "domains": ["lnk.day", "brand.com"],
    "tags": ["marketing", "2024"],
    "folder_id": "folder_123",
    "campaign_id": "campaign_456",
    "status": ["active", "expired"],
    "created_at": {
      "start": "2024-01-01",
      "end": "2024-12-31"
    },
    "clicks_range": {
      "min": 100,
      "max": 10000
    }
  },
  "sort": {
    "field": "clicks",              // created_at, clicks, title
    "order": "desc"
  },
  "pagination": {
    "page": 1,
    "per_page": 50
  }
}
```

**ä¿å­˜çš„æœç´¢**
- ç”¨æˆ·å¯ä¿å­˜å¸¸ç”¨æœç´¢æ¡ä»¶
- æ”¯æŒæœç´¢æ¡ä»¶å…±äº«ç»™å›¢é˜Ÿ
- æœç´¢ç»“æœå¯è®¢é˜…é‚®ä»¶é€šçŸ¥

---

## 2. è¥é”€æ´»åŠ¨ç®¡ç†æ¨¡å—

### 2.1 æ¨¡å—æ¦‚è¿°
æä¾›è¥é”€æ´»åŠ¨ï¼ˆCampaignï¼‰çº§åˆ«çš„é“¾æ¥èšåˆã€ç»Ÿè®¡å’Œç®¡ç†èƒ½åŠ›ï¼Œæ”¯æŒè·¨æ¸ é“è¥é”€æ•ˆæœè¿½è¸ªã€‚

### 2.2 åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 2.2.1 è¥é”€æ´»åŠ¨åˆ›å»º

**API è¯·æ±‚**
```json
{
  "name": "åŒ11å¤§ä¿ƒæ´»åŠ¨",
  "description": "2024å¹´åŒ11è´­ç‰©èŠ‚è¥é”€æ´»åŠ¨",
  "start_date": "2024-11-01T00:00:00Z",
  "end_date": "2024-11-11T23:59:59Z",
  "status": "draft",                   // draft, active, paused, completed
  "budget": {
    "total": 100000,
    "currency": "CNY"
  },
  "channels": ["wechat", "weibo", "douyin", "email"],
  "tags": ["promotion", "shopping-festival"],
  "team_id": "team_123",
  "owner_id": "user_456",
  "settings": {
    "default_utm_source": "campaign_2024_11",
    "default_utm_medium": "social",
    "auto_tag_links": true,
    "notification_on_goal": true
  }
}
```

**è¾“å‡ºç»“æœ**
```json
{
  "id": "campaign_abc123",
  "name": "åŒ11å¤§ä¿ƒæ´»åŠ¨",
  "short_code": "11sale24",
  "status": "draft",
  "created_at": "2024-10-15T10:30:00Z",
  "dashboard_url": "https://app.lnk.day/campaigns/abc123"
}
```

#### 2.2.2 æ´»åŠ¨é“¾æ¥å…³è”

**æ·»åŠ é“¾æ¥åˆ°æ´»åŠ¨**
```json
POST /campaigns/{campaign_id}/links
{
  "link_ids": ["link_123", "link_456", "link_789"],
  "create_new": [
    {
      "long_url": "https://example.com/product/special",
      "custom_slug": "11sale-product",
      "title": "åŒ11ç‰¹æƒ å•†å“"
    }
  ]
}
```

**æ‰¹é‡åˆ›å»ºæ´»åŠ¨é“¾æ¥**
```json
POST /campaigns/{campaign_id}/links/batch
{
  "template": {
    "domain": "brand.com",
    "utm_params": {
      "source": "{{channel}}",
      "medium": "social",
      "campaign": "double11_2024"
    }
  },
  "links": [
    {
      "long_url": "https://example.com/landing",
      "channel": "wechat",
      "custom_slug": "11sale-wechat"
    },
    {
      "long_url": "https://example.com/landing",
      "channel": "weibo",
      "custom_slug": "11sale-weibo"
    },
    {
      "long_url": "https://example.com/landing",
      "channel": "douyin",
      "custom_slug": "11sale-douyin"
    }
  ]
}
```

#### 2.2.3 æ´»åŠ¨çº§åˆ«ç»Ÿè®¡

**ç»Ÿè®¡ API**
```
GET /campaigns/{campaign_id}/analytics?range=7d
```

**è¿”å›æ•°æ®**
```json
{
  "campaign_id": "campaign_abc123",
  "overview": {
    "total_clicks": 125678,
    "unique_visitors": 89012,
    "total_conversions": 3456,
    "conversion_rate": 3.88,
    "total_revenue": 567890.00,
    "roi": 5.68
  },
  "by_channel": [
    {
      "channel": "wechat",
      "clicks": 45000,
      "conversions": 1500,
      "conversion_rate": 3.33,
      "revenue": 225000.00
    },
    {
      "channel": "douyin",
      "clicks": 38000,
      "conversions": 1200,
      "conversion_rate": 3.16,
      "revenue": 180000.00
    },
    {
      "channel": "weibo",
      "clicks": 25678,
      "conversions": 500,
      "conversion_rate": 1.95,
      "revenue": 75000.00
    }
  ],
  "by_link": [
    {
      "link_id": "link_123",
      "title": "é¦–é¡µå…¥å£",
      "clicks": 50000,
      "percentage": 39.8
    }
  ],
  "time_series": [
    {"date": "2024-11-01", "clicks": 15000, "conversions": 400},
    {"date": "2024-11-02", "clicks": 18000, "conversions": 520}
  ],
  "goals": {
    "click_target": 100000,
    "click_progress": 125.68,
    "conversion_target": 3000,
    "conversion_progress": 115.2
  }
}
```

#### 2.2.4 æ´»åŠ¨ç›®æ ‡ä¸æé†’

**ç›®æ ‡é…ç½®**
```json
{
  "campaign_id": "campaign_abc123",
  "goals": [
    {
      "type": "clicks",
      "target": 100000,
      "notification_thresholds": [50, 75, 90, 100]
    },
    {
      "type": "conversions",
      "target": 3000,
      "notification_thresholds": [50, 75, 90, 100]
    },
    {
      "type": "revenue",
      "target": 500000,
      "currency": "CNY",
      "notification_thresholds": [25, 50, 75, 100]
    }
  ],
  "notifications": {
    "email": ["marketing@example.com"],
    "webhook": "https://example.com/webhook/campaign",
    "slack_channel": "#marketing-alerts"
  }
}
```

#### 2.2.5 æ´»åŠ¨åä½œ

**æƒé™æ¨¡å‹**
```json
{
  "campaign_id": "campaign_abc123",
  "permissions": [
    {
      "user_id": "user_001",
      "role": "owner",
      "permissions": ["*"]
    },
    {
      "user_id": "user_002",
      "role": "editor",
      "permissions": ["read", "create_links", "edit_links", "view_analytics"]
    },
    {
      "user_id": "user_003",
      "role": "viewer",
      "permissions": ["read", "view_analytics"]
    }
  ]
}
```

**æ´»åŠ¨è¯„è®º**
```json
POST /campaigns/{campaign_id}/comments
{
  "content": "å»ºè®®å¢åŠ æŠ–éŸ³æ¸ é“çš„é¢„ç®—ï¼Œè½¬åŒ–æ•ˆæœå¾ˆå¥½",
  "mentioned_users": ["user_002"],
  "attachments": [
    {
      "type": "link",
      "link_id": "link_456"
    }
  ]
}
```

#### 2.2.6 æ´»åŠ¨æ¨¡æ¿

**ä¿å­˜ä¸ºæ¨¡æ¿**
```json
POST /campaign-templates
{
  "name": "åŒ11æ´»åŠ¨æ¨¡æ¿",
  "source_campaign_id": "campaign_abc123",
  "include": {
    "settings": true,
    "goals": true,
    "channels": true,
    "link_structure": true
  }
}
```

**ä»æ¨¡æ¿åˆ›å»º**
```json
POST /campaigns/from-template
{
  "template_id": "template_xyz",
  "name": "åŒ12æ´»åŠ¨",
  "start_date": "2024-12-01",
  "end_date": "2024-12-12",
  "overrides": {
    "utm_params": {
      "campaign": "double12_2024"
    }
  }
}
```

---

## 3. äºŒç»´ç ç”Ÿæˆæ¨¡å—

### 3.1 æ¨¡å—æ¦‚è¿°
æä¾›é™æ€/åŠ¨æ€äºŒç»´ç ç”Ÿæˆã€æ ·å¼å®šåˆ¶å’Œæ‰«ç è¿½è¸ªæœåŠ¡ã€‚

### 3.2 åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 3.2.1 äºŒç»´ç ç”Ÿæˆ

**API è¯·æ±‚**
```json
{
  "type": "dynamic",                // static æˆ– dynamic
  "content_type": "url",            // url, phone, sms, email, vcard, wifi
  "content": "https://lnk.day/abc",
  "style": {
    "size": 1000,                   // åƒç´ 
    "format": "png",                // png, svg, pdf, eps
    "error_correction": "M",        // L, M, Q, H
    "foreground_color": "#000000",
    "background_color": "#FFFFFF",
    "logo_url": "https://cdn.example.com/logo.png",
    "logo_size": 0.2,               // Logo å æ¯” (0-0.3)
    "dot_style": "rounded",         // square, rounded, dots
    "gradient": {
      "enabled": true,
      "start_color": "#667eea",
      "end_color": "#764ba2",
      "direction": "diagonal"
    }
  }
}
```

**ç”Ÿæˆæµç¨‹**
1. è§£æå†…å®¹å’Œæ ·å¼å‚æ•°
2. è°ƒç”¨äºŒç»´ç ç”Ÿæˆåº“ï¼ˆå¦‚ qrcode.jsï¼‰
3. åº”ç”¨æ ·å¼å®šåˆ¶ï¼ˆé¢œè‰²ã€Logoã€æ¸å˜ï¼‰
4. å¯¼å‡ºæŒ‡å®šæ ¼å¼
5. ä¸Šä¼ åˆ° CDN
6. ä¿å­˜äºŒç»´ç è®°å½•

**è¾“å‡ºç»“æœ**
```json
{
  "qr_id": "qr_xyz789",
  "qr_url": "https://cdn.lnk.day/qr/xyz789.png",
  "download_formats": {
    "png": "https://cdn.lnk.day/qr/xyz789.png",
    "svg": "https://cdn.lnk.day/qr/xyz789.svg",
    "pdf": "https://cdn.lnk.day/qr/xyz789.pdf"
  },
  "preview_url": "https://lnk.day/qr/xyz789/preview"
}
```

#### 3.2.2 åŠ¨æ€äºŒç»´ç ç®¡ç†

**æ ¸å¿ƒæœºåˆ¶**
- äºŒç»´ç å›¾æ¡ˆä¸å˜ï¼ŒæŒ‡å‘ lnk.day è·³è½¬é“¾æ¥
- è·³è½¬é“¾æ¥ç›®æ ‡å¯éšæ—¶ä¿®æ”¹
- æ‰«ç ç»Ÿè®¡ç‹¬ç«‹è¿½è¸ª

**ä¿®æ”¹ç›®æ ‡ URL**
```json
PUT /api/qr/{qr_id}
{
  "target_url": "https://new-destination.com"
}
```

**åº”ç”¨åœºæ™¯**
- å°åˆ·ç‰©æ–™ï¼ˆäº§å“åŒ…è£…ã€æµ·æŠ¥ã€åç‰‡ï¼‰
- æ´»åŠ¨ç°åœºï¼ˆç­¾åˆ°ã€æŠ½å¥–ã€é—®å·ï¼‰
- åŠ¨æ€èœå•ï¼ˆé¤å…ã€é…’åº—ï¼‰

#### 3.2.3 GS1 Digital Link

**æ ‡å‡†æ ¼å¼**
```
https://lnk.day/01/09521234567890/21/12345
```

è§£æåï¼š
- `01`: GTIN (å…¨çƒè´¸æ˜“é¡¹ç›®ä»£ç )
- `09521234567890`: å•†å“æ¡ç 
- `21`: åºåˆ—å·
- `12345`: æ‰¹æ¬¡å·

**æ”¯æŒçš„ GS1 åº”ç”¨æ ‡è¯†ç¬¦**
- (01) GTIN - å…¨çƒè´¸æ˜“é¡¹ç›®ä»£ç 
- (10) æ‰¹æ¬¡å·
- (21) åºåˆ—å·
- (17) è¿‡æœŸæ—¥æœŸ
- (240) é™„åŠ äº§å“æ ‡è¯†

#### 3.2.4 æ‰¹é‡äºŒç»´ç ç”Ÿæˆ

**æ‰¹é‡ç”Ÿæˆ API**
```json
{
  "batch_name": "äº§å“ç³»åˆ—äºŒç»´ç ",
  "template": {
    "style": { /* ç»Ÿä¸€æ ·å¼ */ }
  },
  "items": [
    {"content": "https://example.com/product/001", "filename": "äº§å“001"},
    {"content": "https://example.com/product/002", "filename": "äº§å“002"}
    // ... æœ€å¤š 1000 ä¸ª
  ]
}
```

**è¾“å‡º**
- ZIP å‹ç¼©åŒ…ä¸‹è½½é“¾æ¥
- åŒ…å«æ‰€æœ‰äºŒç»´ç æ–‡ä»¶
- é™„å¸¦ CSV æ¸…å•

---

## 4. ç€é™†é¡µé¢æ¨¡å—

### 4.1 æ¨¡å—æ¦‚è¿°
æä¾›å…ä»£ç çš„é¡µé¢æ„å»ºã€å‘å¸ƒå’Œç®¡ç†ç³»ç»Ÿã€‚

### 4.2 åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 4.2.1 é¡µé¢ç¼–è¾‘å™¨

**é¡µé¢ç»“æ„**
```json
{
  "page_id": "page_123",
  "slug": "my-page",              // yourname.lnk.day æˆ–è‡ªå®šä¹‰åŸŸå
  "title": "æˆ‘çš„ä¸ªäººä¸»é¡µ",
  "description": "SEO æè¿°",
  "favicon_url": "https://cdn.example.com/favicon.ico",
  "theme": {
    "background_color": "#ffffff",
    "background_image": "https://cdn.example.com/bg.jpg",
    "font_family": "PingFang SC",
    "primary_color": "#667eea"
  },
  "blocks": [
    {
      "id": "block_1",
      "type": "profile",
      "config": {
        "avatar_url": "https://cdn.example.com/avatar.jpg",
        "name": "å¼ ä¸‰",
        "bio": "äº§å“ç»ç† | ç§‘æŠ€çˆ±å¥½è€…"
      }
    },
    {
      "id": "block_2",
      "type": "link_button",
      "config": {
        "text": "æŸ¥çœ‹æˆ‘çš„ä½œå“é›†",
        "url": "https://portfolio.example.com",
        "style": "rounded",        // rounded, square, outlined
        "icon": "portfolio"
      }
    },
    {
      "id": "block_3",
      "type": "video",
      "config": {
        "platform": "youtube",
        "video_id": "dQw4w9WgXcQ"
      }
    }
  ]
}
```

**æ”¯æŒçš„ç»„ä»¶ç±»å‹**
| ç»„ä»¶ç±»å‹ | è¯´æ˜ | é…ç½®é¡¹ |
|---------|------|--------|
| profile | ä¸ªäººä¿¡æ¯ | å¤´åƒã€å§“åã€ç®€ä»‹ |
| link_button | é“¾æ¥æŒ‰é’® | æ–‡æœ¬ã€URLã€å›¾æ ‡ã€æ ·å¼ |
| text_block | æ–‡æœ¬å— | Markdown å†…å®¹ |
| image | å›¾ç‰‡ | URLã€é“¾æ¥ã€æè¿° |
| video | è§†é¢‘åµŒå…¥ | YouTube/æŠ–éŸ³/Bç«™ |
| social_icons | ç¤¾äº¤åª’ä½“å›¾æ ‡ | å¹³å°ã€é“¾æ¥ |
| contact_form | è”ç³»è¡¨å• | å­—æ®µé…ç½®ã€é‚®ä»¶æ¥æ”¶ |
| countdown | å€’è®¡æ—¶ | ç›®æ ‡æ—¶é—´ã€æ ‡é¢˜ |
| product_card | äº§å“å¡ç‰‡ | å›¾ç‰‡ã€æ ‡é¢˜ã€ä»·æ ¼ã€é“¾æ¥ |
| divider | åˆ†éš”çº¿ | æ ·å¼ã€é¢œè‰² |

#### 4.2.2 æ¨¡æ¿åº“

**é¢„ç½®æ¨¡æ¿åˆ†ç±»**
1. **ä¸ªäººç±»**
   - Personal Resume
   - Creator Portfolio
   - Photography Portfolio
   - Designer Showcase

2. **å•†ä¸šç±»**
   - Restaurant Menu
   - Event Registration
   - Product Launch
   - Course Introduction

3. **ç¤¾äº¤ç±»**
   - Instagram Link-in-bio
   - TikTok Profile
   - YouTube Creator
   - Digital Business Card

**æ¨¡æ¿åº”ç”¨**
- ä¸€é”®åº”ç”¨æ¨¡æ¿
- ä¿ç•™æ¨¡æ¿ç»“æ„ï¼Œæ›¿æ¢å†…å®¹
- æ”¯æŒæ¨¡æ¿æ”¶è—å’Œè‡ªå®šä¹‰

#### 4.2.3 Link-in-bio åŠŸèƒ½

**é¡µé¢ç»“æ„**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Avatar + Username â”‚
â”‚   Bio Description   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“± My TikTok]     â”‚  â† Link Button 1
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ¬ Latest Video]  â”‚  â† Link Button 2
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ›ï¸ Shop Now]      â”‚  â† Link Button 3
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Instagram | Twitterâ”‚  â† Social Icons
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é“¾æ¥ç®¡ç†**
- æ‹–æ‹½æ’åº
- å¼€å…³æ˜¾ç¤º/éšè—
- ç‚¹å‡»ç»Ÿè®¡
- ä¸´æ—¶ç½®é¡¶
- é“¾æ¥åˆ†ç»„

#### 4.2.4 SEO ä¼˜åŒ–

**è‡ªåŠ¨ç”Ÿæˆ**
```html
<head>
  <title>æˆ‘çš„ä¸ªäººä¸»é¡µ | lnk.day</title>
  <meta name="description" content="äº§å“ç»ç† | ç§‘æŠ€çˆ±å¥½è€…">
  <meta property="og:title" content="æˆ‘çš„ä¸ªäººä¸»é¡µ">
  <meta property="og:description" content="äº§å“ç»ç† | ç§‘æŠ€çˆ±å¥½è€…">
  <meta property="og:image" content="https://cdn.example.com/avatar.jpg">
  <meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://my-page.lnk.day">
</head>
```

---

## 5. æ•°æ®åˆ†ææ¨¡å—

### 5.1 æ¨¡å—æ¦‚è¿°
å®æ—¶çš„æ•°æ®é‡‡é›†ã€å¤„ç†ã€åˆ†æå’Œå¯è§†åŒ–ç³»ç»Ÿã€‚

### 5.2 åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 5.2.1 æ•°æ®é‡‡é›†

**è®¿é—®äº‹ä»¶è®°å½•**
```json
{
  "event_id": "evt_abc123",
  "event_type": "link_click",      // link_click, qr_scan, page_view
  "link_id": "link_123",
  "timestamp": "2024-01-15T10:30:00.123Z",
  "visitor": {
    "ip": "123.45.67.89",
    "user_agent": "Mozilla/5.0...",
    "fingerprint": "fp_xyz789",    // è®¾å¤‡æŒ‡çº¹
    "is_bot": false
  },
  "location": {
    "country": "CN",
    "country_name": "ä¸­å›½",
    "region": "Beijing",
    "city": "Beijing",
    "latitude": 39.9042,
    "longitude": 116.4074,
    "timezone": "Asia/Shanghai"
  },
  "device": {
    "type": "mobile",              // desktop, mobile, tablet
    "os": "iOS",
    "os_version": "17.2",
    "browser": "Safari",
    "browser_version": "17.2",
    "device_brand": "Apple",
    "device_model": "iPhone 15 Pro"
  },
  "referrer": {
    "url": "https://twitter.com/user/status/123",
    "domain": "twitter.com",
    "source": "twitter",           // ç¤¾äº¤åª’ä½“å¹³å°è¯†åˆ«
    "medium": "social"
  },
  "utm_params": {
    "source": "wechat",
    "medium": "social",
    "campaign": "winter_sale",
    "content": "banner_1",
    "term": "keyword"
  }
}
```

**æ•°æ®å¤„ç†æµç¨‹**
```
è®¿é—®è¯·æ±‚
  â†“
æå–è®¿é—®ä¿¡æ¯
  â†“
IP åœ°ç†ä½ç½®è§£æï¼ˆMaxMind GeoIPï¼‰
  â†“
User-Agent è§£æï¼ˆua-parserï¼‰
  â†“
æœºå™¨äººæ£€æµ‹
  â†“
å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafka/RabbitMQï¼‰
  â†“
å¼‚æ­¥å†™å…¥æ•°æ®ä»“åº“ï¼ˆClickHouseï¼‰
  â†“
å®æ—¶èšåˆè®¡ç®—ï¼ˆFlink/Sparkï¼‰
  â†“
ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼ˆRedisï¼‰
```

#### 5.2.2 å®æ—¶ç»Ÿè®¡

**API æŸ¥è¯¢ç¤ºä¾‹**
```
GET /api/analytics/links/{link_id}/stats?range=7d
```

**è¿”å›æ•°æ®**
```json
{
  "overview": {
    "total_clicks": 12345,
    "unique_visitors": 8901,
    "click_through_rate": 0.72,
    "avg_clicks_per_visitor": 1.39
  },
  "time_series": [
    {"date": "2024-01-15", "clicks": 1234, "unique_visitors": 890},
    {"date": "2024-01-16", "clicks": 2345, "unique_visitors": 1234}
  ],
  "top_locations": [
    {"country": "CN", "clicks": 5000, "percentage": 40.5},
    {"country": "US", "clicks": 3000, "percentage": 24.3}
  ],
  "top_devices": [
    {"type": "mobile", "os": "iOS", "clicks": 6000, "percentage": 48.6},
    {"type": "mobile", "os": "Android", "clicks": 4000, "percentage": 32.4}
  ],
  "top_referrers": [
    {"source": "twitter.com", "clicks": 3000},
    {"source": "facebook.com", "clicks": 2000}
  ]
}
```

#### 5.2.3 æ•°æ®å¯è§†åŒ–

**å›¾è¡¨ç±»å‹**
1. **æ—¶é—´è¶‹åŠ¿å›¾**
   - æŠ˜çº¿å›¾ï¼šç‚¹å‡»é‡/æ‰«ç é‡éšæ—¶é—´å˜åŒ–
   - æŸ±çŠ¶å›¾ï¼šæŒ‰å¤©/å‘¨/æœˆç»Ÿè®¡
   - å¯¹æ¯”å›¾ï¼šæœ¬æœŸ vs ä¸ŠæœŸ

2. **åœ°ç†åˆ†å¸ƒå›¾**
   - ä¸–ç•Œåœ°å›¾çƒ­åŠ›å›¾
   - åŒºåŸŸ/å›½å®¶åˆ†å¸ƒ
   - åŸå¸‚ Top 10 åˆ—è¡¨

3. **è®¾å¤‡åˆ†æå›¾**
   - é¥¼å›¾ï¼šè®¾å¤‡ç±»å‹å æ¯”
   - ç¯å½¢å›¾ï¼šæ“ä½œç³»ç»Ÿåˆ†å¸ƒ
   - å †å æŸ±çŠ¶å›¾ï¼šæµè§ˆå™¨ç‰ˆæœ¬

4. **æ¥æºåˆ†æå›¾**
   - æ¼æ–—å›¾ï¼šæµé‡æ¥æº â†’ ç‚¹å‡» â†’ è½¬åŒ–
   - æ¡‘åŸºå›¾ï¼šUTM å‚æ•°æµå‘
   - æ ‘çŠ¶å›¾ï¼šReferrer å±‚çº§

#### 5.2.4 è‡ªå®šä¹‰æŠ¥è¡¨

**æŠ¥è¡¨é…ç½®**
```json
{
  "report_name": "Weekly Marketing Report",
  "schedule": "weekly",           // daily, weekly, monthly
  "day_of_week": "monday",
  "time": "09:00",
  "timezone": "America/New_York",
  "recipients": ["user@example.com"],
  "content": {
    "date_range": "last_7_days",
    "metrics": ["clicks", "unique_visitors", "ctr"],
    "dimensions": ["device", "location", "referrer"],
    "filters": {
      "tags": ["marketing"],
      "campaigns": ["winter_sale"]
    }
  },
  "format": "pdf",                // pdf, csv, excel
  "language": "en-US"
}
```

#### 5.2.5 Webhook é›†æˆ

**äº‹ä»¶è®¢é˜…**
```json
{
  "webhook_url": "https://your-server.com/webhook",
  "events": ["link.clicked", "qr.scanned", "link.created"],
  "filters": {
    "tags": ["important"],
    "threshold": {"clicks": 1000}  // ç‚¹å‡»æ•°è¶…è¿‡ 1000 æ—¶è§¦å‘
  },
  "secret": "whsec_xxxxxxxxxxxxx"  // ç­¾åå¯†é’¥
}
```

**Webhook æ¨é€æ ¼å¼**
```json
{
  "event": "link.clicked",
  "timestamp": "2024-01-15T10:30:00Z",
  "data": {
    "link_id": "link_123",
    "short_url": "https://lnk.day/abc",
    "visitor_country": "US",
    "device_type": "mobile"
  },
  "signature": "sha256=..."
}
```

#### 5.2.6 Custom Data Streamsï¼ˆä¼ä¸šç‰ˆï¼‰

**åŠŸèƒ½æ¦‚è¿°**
Custom Data Streams å…è®¸ä¼ä¸šå®¢æˆ·å°†å®æ—¶ç‚¹å‡»å’Œæ‰«ç æ•°æ®ç›´æ¥å¯¼å‡ºåˆ°è‡ªå·±çš„æ•°æ®ä»“åº“ï¼Œæ”¯æŒå¤šç§ä¸»æµæ•°æ®å¹³å°ã€‚

**æ”¯æŒçš„ç›®æ ‡å¹³å°**
- Google BigQuery
- Amazon Redshift
- Snowflake
- Amazon S3 / Google Cloud Storage
- Azure Blob Storage
- Apache Kafka
- Custom HTTP Endpoint

**é…ç½®ç¤ºä¾‹ - BigQuery**
```json
{
  "stream_id": "stream_abc123",
  "name": "Production Click Stream",
  "destination": {
    "type": "bigquery",
    "project_id": "my-gcp-project",
    "dataset_id": "lnk_analytics",
    "table_id": "click_events",
    "credentials": {
      "type": "service_account",
      "key_file": "gs://my-bucket/credentials.json"
    }
  },
  "schema": {
    "mode": "auto",  // auto | custom
    "fields": [
      {"name": "event_id", "type": "STRING"},
      {"name": "link_id", "type": "STRING"},
      {"name": "timestamp", "type": "TIMESTAMP"},
      {"name": "visitor_country", "type": "STRING"},
      {"name": "device_type", "type": "STRING"},
      {"name": "referrer", "type": "STRING"},
      {"name": "utm_source", "type": "STRING"},
      {"name": "utm_medium", "type": "STRING"},
      {"name": "utm_campaign", "type": "STRING"}
    ]
  },
  "filters": {
    "link_tags": ["production"],
    "exclude_bots": true
  },
  "delivery": {
    "mode": "realtime",  // realtime | batch
    "batch_size": 1000,
    "batch_interval_seconds": 60
  },
  "status": "active"
}
```

**é…ç½®ç¤ºä¾‹ - S3**
```json
{
  "stream_id": "stream_xyz789",
  "name": "S3 Archive Stream",
  "destination": {
    "type": "s3",
    "bucket": "my-analytics-bucket",
    "prefix": "lnk-day/clicks/",
    "region": "us-east-1",
    "credentials": {
      "access_key_id": "AKIAXXXXXXXX",
      "secret_access_key": "encrypted:xxxxx"
    },
    "file_format": "parquet",  // parquet | json | csv
    "compression": "gzip"
  },
  "partitioning": {
    "enabled": true,
    "pattern": "year={YYYY}/month={MM}/day={DD}/hour={HH}"
  },
  "delivery": {
    "mode": "batch",
    "batch_interval_seconds": 300
  }
}
```

**å†å²æ•°æ®å›å¡«**
```json
POST /data-streams/{stream_id}/backfill
{
  "start_date": "2024-01-01",
  "end_date": "2024-06-30",
  "filters": {
    "link_ids": ["link_123", "link_456"],
    "campaign_ids": ["campaign_abc"]
  }
}
```

**ç›‘æ§ä¸å‘Šè­¦**
- æ•°æ®å»¶è¿Ÿç›‘æ§
- ä¼ è¾“å¤±è´¥å‘Šè­¦
- é…é¢ä½¿ç”¨ç»Ÿè®¡
- æ•°æ®è´¨é‡æ£€æŸ¥

**API ç«¯ç‚¹**
```
POST   /data-streams                  åˆ›å»ºæ•°æ®æµ
GET    /data-streams                  åˆ—å‡ºæ•°æ®æµ
GET    /data-streams/{id}             è·å–æ•°æ®æµè¯¦æƒ…
PUT    /data-streams/{id}             æ›´æ–°æ•°æ®æµé…ç½®
DELETE /data-streams/{id}             åˆ é™¤æ•°æ®æµ
POST   /data-streams/{id}/test        æµ‹è¯•æ•°æ®æµè¿æ¥
POST   /data-streams/{id}/backfill    å†å²æ•°æ®å›å¡«
GET    /data-streams/{id}/stats       è·å–ä¼ è¾“ç»Ÿè®¡
```

---

## 6. ç”¨æˆ·è®¤è¯ä¸æƒé™æ¨¡å—

### 6.1 æ¨¡å—æ¦‚è¿°
æä¾›ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€å›¢é˜Ÿç®¡ç†å’Œç»†ç²’åº¦æƒé™æ§åˆ¶ã€‚

### 6.2 åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 6.2.1 ç”¨æˆ·æ³¨å†Œä¸ç™»å½•

**æ³¨å†Œæ–¹å¼**
1. é‚®ç®± + å¯†ç 
2. ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆGoogleã€GitHubã€Appleï¼‰
3. SSO å•ç‚¹ç™»å½•ï¼ˆä¼ä¸šç‰ˆï¼‰

**æ³¨å†Œæµç¨‹**
```
å¡«å†™æ³¨å†Œä¿¡æ¯
  â†“
å‘é€éªŒè¯é‚®ä»¶/çŸ­ä¿¡
  â†“
éªŒè¯ç æ ¡éªŒ
  â†“
åˆ›å»ºç”¨æˆ·è´¦å·
  â†“
å‘é€æ¬¢è¿é‚®ä»¶
  â†“
å¼•å¯¼å®Œæˆä¸ªäººèµ„æ–™
```

**å®‰å…¨æªæ–½**
- å¯†ç å¼ºåº¦æ£€æµ‹ï¼ˆè‡³å°‘ 8 ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ï¼‰
- bcrypt å“ˆå¸Œå­˜å‚¨
- ç™»å½•å¤±è´¥é”å®šï¼ˆ5 æ¬¡å¤±è´¥é”å®š 15 åˆ†é’Ÿï¼‰
- å¼‚åœ°ç™»å½•å‘Šè­¦
- ä¼šè¯ç®¡ç†ï¼ˆJWT + Refresh Tokenï¼‰

#### 5.2.2 ä¸¤æ­¥éªŒè¯ï¼ˆ2FAï¼‰

**æ”¯æŒæ–¹å¼**
1. TOTPï¼ˆGoogle Authenticatorã€Microsoft Authenticatorï¼‰
2. çŸ­ä¿¡éªŒè¯ç 
3. é‚®ç®±éªŒè¯ç 
4. å¤‡ç”¨æ¢å¤ç ï¼ˆ10 ä¸ªä¸€æ¬¡æ€§ä½¿ç”¨ï¼‰

**å¯ç”¨æµç¨‹**
```
ç”¨æˆ·è®¾ç½® â†’ å®‰å…¨è®¾ç½® â†’ å¯ç”¨ä¸¤æ­¥éªŒè¯
  â†“
é€‰æ‹©éªŒè¯æ–¹å¼ï¼ˆTOTPï¼‰
  â†“
æ‰«æäºŒç»´ç  / è¾“å…¥å¯†é’¥
  â†“
è¾“å…¥ 6 ä½éªŒè¯ç ç¡®è®¤
  â†“
æ˜¾ç¤ºå¤‡ç”¨æ¢å¤ç ï¼ˆä¸‹è½½ä¿å­˜ï¼‰
  â†“
å®Œæˆå¯ç”¨
```

#### 5.2.3 å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰

**æ”¯æŒåè®®**
- SAML 2.0
- OAuth 2.0 / OpenID Connect
- LDAP / Active Directory

**é…ç½®ç¤ºä¾‹ï¼ˆSAMLï¼‰**
```json
{
  "sso_provider": "okta",
  "entity_id": "https://lnk.day",
  "sso_url": "https://company.okta.com/app/xxx/sso/saml",
  "certificate": "-----BEGIN CERTIFICATE-----\n...",
  "attribute_mapping": {
    "email": "user.email",
    "name": "user.displayName",
    "department": "user.department"
  },
  "auto_provision": true,          // è‡ªåŠ¨åˆ›å»ºç”¨æˆ·
  "default_role": "member"
}
```

#### 5.2.4 å›¢é˜Ÿä¸å·¥ä½œç©ºé—´

**å›¢é˜Ÿç»“æ„**
```
ä¼ä¸šè´¦å·ï¼ˆEnterpriseï¼‰
  â”œâ”€ å·¥ä½œç©ºé—´ 1ï¼ˆè¥é”€å›¢é˜Ÿï¼‰
  â”‚   â”œâ”€ æˆå‘˜ Aï¼ˆç®¡ç†å‘˜ï¼‰
  â”‚   â”œâ”€ æˆå‘˜ Bï¼ˆç¼–è¾‘è€…ï¼‰
  â”‚   â””â”€ æˆå‘˜ Cï¼ˆæŸ¥çœ‹è€…ï¼‰
  â”œâ”€ å·¥ä½œç©ºé—´ 2ï¼ˆäº§å“å›¢é˜Ÿï¼‰
  â”‚   â”œâ”€ æˆå‘˜ Dï¼ˆç®¡ç†å‘˜ï¼‰
  â”‚   â””â”€ æˆå‘˜ Eï¼ˆç¼–è¾‘è€…ï¼‰
  â””â”€ å·¥ä½œç©ºé—´ 3ï¼ˆå®¢æœå›¢é˜Ÿï¼‰
      â””â”€ æˆå‘˜ Fï¼ˆæŸ¥çœ‹è€…ï¼‰
```

**æˆå‘˜é‚€è¯·**
```json
POST /api/teams/{team_id}/invitations
{
  "email": "newuser@example.com",
  "role": "editor",
  "workspaces": ["workspace_1", "workspace_2"],
  "message": "æ¬¢è¿åŠ å…¥è¥é”€å›¢é˜Ÿï¼"
}
```

é‚®ä»¶å†…å®¹ï¼š
```
æ‚¨å·²è¢«é‚€è¯·åŠ å…¥ lnk.day çš„ã€Œè¥é”€å›¢é˜Ÿã€

ç‚¹å‡»ä¸‹æ–¹é“¾æ¥æ¥å—é‚€è¯·ï¼š
https://lnk.day/accept-invite?token=xxx

æ­¤é‚€è¯· 7 å¤©å†…æœ‰æ•ˆã€‚
```

#### 5.2.5 æƒé™ç³»ç»Ÿï¼ˆRBACï¼‰

**é¢„å®šä¹‰è§’è‰²**
| è§’è‰² | æƒé™ |
|-----|------|
| Owner | æ‰€æœ‰æƒé™ï¼ŒåŒ…æ‹¬åˆ é™¤å›¢é˜Ÿã€è½¬è®©æ‰€æœ‰æƒ |
| Admin | å›¢é˜Ÿç®¡ç†ã€æˆå‘˜ç®¡ç†ã€è®¡è´¹ç®¡ç†ã€æ‰€æœ‰èµ„æºæ“ä½œ |
| Editor | åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤è‡ªå·±çš„é“¾æ¥/äºŒç»´ç /é¡µé¢ï¼ŒæŸ¥çœ‹å›¢é˜Ÿæ•°æ® |
| Viewer | ä»…æŸ¥çœ‹é“¾æ¥åˆ—è¡¨å’Œæ•°æ®æŠ¥è¡¨ï¼Œæ— ç¼–è¾‘æƒé™ |
| Custom | è‡ªå®šä¹‰æƒé™ç»„åˆï¼ˆä¼ä¸šç‰ˆï¼‰ |

**æƒé™ç²’åº¦**
```json
{
  "permissions": {
    "links": {
      "create": true,
      "read": true,
      "update": true,
      "delete": false             // ä¸èƒ½åˆ é™¤
    },
    "qr_codes": {
      "create": true,
      "read": true,
      "update": true,
      "delete": true
    },
    "analytics": {
      "view_own": true,           // æŸ¥çœ‹è‡ªå·±çš„æ•°æ®
      "view_team": false,         // ä¸èƒ½æŸ¥çœ‹å›¢é˜Ÿæ•°æ®
      "export": false             // ä¸èƒ½å¯¼å‡ºæ•°æ®
    },
    "team": {
      "invite_members": false,
      "remove_members": false,
      "manage_roles": false
    },
    "billing": {
      "view": false,
      "manage": false
    }
  }
}
```

#### 5.2.6 å®¡è®¡æ—¥å¿—

**è®°å½•å†…å®¹**
```json
{
  "log_id": "log_123",
  "timestamp": "2024-01-15T10:30:00Z",
  "user_id": "user_456",
  "user_email": "user@example.com",
  "action": "link.deleted",
  "resource_type": "link",
  "resource_id": "link_789",
  "ip_address": "123.45.67.89",
  "user_agent": "Mozilla/5.0...",
  "details": {
    "link_url": "https://lnk.day/abc",
    "original_url": "https://example.com"
  }
}
```

**å¯å®¡è®¡æ“ä½œ**
- ç”¨æˆ·ç™»å½•/ç™»å‡º
- æƒé™å˜æ›´
- èµ„æºåˆ›å»º/ä¿®æ”¹/åˆ é™¤
- å›¢é˜Ÿæˆå‘˜å˜åŠ¨
- è®¡è´¹å˜æ›´
- æ•æ„Ÿè®¾ç½®ä¿®æ”¹

---

## 6. API æœåŠ¡æ¨¡å—

### 6.1 æ¨¡å—æ¦‚è¿°
æä¾›å®Œæ•´çš„ RESTful API å’Œ SDKï¼Œæ”¯æŒç¬¬ä¸‰æ–¹é›†æˆã€‚

### 6.2 API è®¾è®¡è§„èŒƒ

#### 6.2.1 åŸºç¡€ä¿¡æ¯

**Base URL**
```
https://api.lnk.day/v1
```

**è®¤è¯æ–¹å¼**
```
Authorization: Bearer {api_key}
```

**è¯·æ±‚å¤´**
```
Content-Type: application/json
Accept: application/json
User-Agent: MyApp/1.0
```

**API å¯†é’¥ç®¡ç†**
- æ”¯æŒåˆ›å»ºå¤šä¸ª API Key
- å¯è®¾ç½® Key æƒé™èŒƒå›´ï¼ˆåªè¯»/è¯»å†™ï¼‰
- å¯è®¾ç½® Key è¿‡æœŸæ—¶é—´
- IP ç™½åå•é™åˆ¶
- é€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰

#### 6.2.2 æ ¸å¿ƒ API ç«¯ç‚¹

**é“¾æ¥ç®¡ç†**
```
POST   /links                    åˆ›å»ºé“¾æ¥
GET    /links                    åˆ—è¡¨æŸ¥è¯¢
GET    /links/{id}               æŸ¥è¯¢è¯¦æƒ…
PATCH  /links/{id}               æ›´æ–°é“¾æ¥
DELETE /links/{id}               åˆ é™¤é“¾æ¥
GET    /links/{id}/stats         æŸ¥è¯¢ç»Ÿè®¡
POST   /links/batch              æ‰¹é‡åˆ›å»º
```

**äºŒç»´ç ç®¡ç†**
```
POST   /qr-codes                 åˆ›å»ºäºŒç»´ç 
GET    /qr-codes                 åˆ—è¡¨æŸ¥è¯¢
GET    /qr-codes/{id}            æŸ¥è¯¢è¯¦æƒ…
PATCH  /qr-codes/{id}            æ›´æ–°äºŒç»´ç 
DELETE /qr-codes/{id}            åˆ é™¤äºŒç»´ç 
GET    /qr-codes/{id}/download   ä¸‹è½½äºŒç»´ç 
```

**é¡µé¢ç®¡ç†**
```
POST   /pages                    åˆ›å»ºé¡µé¢
GET    /pages                    åˆ—è¡¨æŸ¥è¯¢
GET    /pages/{id}               æŸ¥è¯¢è¯¦æƒ…
PATCH  /pages/{id}               æ›´æ–°é¡µé¢
DELETE /pages/{id}               åˆ é™¤é¡µé¢
POST   /pages/{id}/publish       å‘å¸ƒé¡µé¢
```

**æ•°æ®åˆ†æ**
```
GET    /analytics/links/{id}     é“¾æ¥ç»Ÿè®¡
GET    /analytics/qr/{id}        äºŒç»´ç ç»Ÿè®¡
GET    /analytics/overview       æ€»è§ˆæ•°æ®
GET    /analytics/export         å¯¼å‡ºæ•°æ®
```

#### 6.2.3 è¯·æ±‚ç¤ºä¾‹

**åˆ›å»ºé“¾æ¥**
```bash
curl -X POST https://api.lnk.day/v1/links \
  -H "Authorization: Bearer {api_key}" \
  -H "Content-Type: application/json" \
  -d '{
    "long_url": "https://example.com/product",
    "domain": "lnk.day",
    "custom_slug": "my-product",
    "title": "æˆ‘çš„äº§å“é¡µ"
  }'
```

**å“åº”**
```json
{
  "success": true,
  "data": {
    "id": "link_abc123",
    "short_url": "https://lnk.day/my-product",
    "long_url": "https://example.com/product",
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

#### 6.2.4 é”™è¯¯å¤„ç†

**é”™è¯¯å“åº”æ ¼å¼**
```json
{
  "success": false,
  "error": {
    "code": "SLUG_ALREADY_EXISTS",
    "message": "è‡ªå®šä¹‰çŸ­é“¾å·²è¢«å ç”¨",
    "details": {
      "slug": "my-product",
      "suggestion": "my-product-2024"
    }
  }
}
```

**HTTP çŠ¶æ€ç **
- 200 OK - æˆåŠŸ
- 201 Created - åˆ›å»ºæˆåŠŸ
- 400 Bad Request - è¯·æ±‚å‚æ•°é”™è¯¯
- 401 Unauthorized - æœªæˆæƒ
- 403 Forbidden - æ— æƒé™
- 404 Not Found - èµ„æºä¸å­˜åœ¨
- 409 Conflict - èµ„æºå†²çª
- 429 Too Many Requests - é€Ÿç‡é™åˆ¶
- 500 Internal Server Error - æœåŠ¡å™¨é”™è¯¯

#### 6.2.5 é€Ÿç‡é™åˆ¶

**é™åˆ¶è§„åˆ™**
| å¥—é¤ | é€Ÿç‡é™åˆ¶ |
|------|---------|
| å…è´¹ç‰ˆ | 100 è¯·æ±‚/å°æ—¶ |
| æ ¸å¿ƒç‰ˆ | 1,000 è¯·æ±‚/å°æ—¶ |
| æˆé•¿ç‰ˆ | 10,000 è¯·æ±‚/å°æ—¶ |
| ä¼ä¸šç‰ˆ | æ— é™åˆ¶ï¼ˆæˆ–è‡ªå®šä¹‰ï¼‰ |

**å“åº”å¤´**
```
X-RateLimit-Limit: 10000
X-RateLimit-Remaining: 9950
X-RateLimit-Reset: 1705315200
```

**è¶…é™å“åº”**
```json
{
  "success": false,
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "API è¯·æ±‚é¢‘ç‡è¶…é™ï¼Œè¯·ç¨åé‡è¯•",
    "retry_after": 3600
  }
}
```

#### 6.2.6 SDK æ”¯æŒ

**JavaScript/Node.js**
```javascript
const Lnkday = require('@lnkday/sdk');

const client = new Lnkday({
  apiKey: 'your_api_key'
});

// åˆ›å»ºé“¾æ¥
const link = await client.links.create({
  longUrl: 'https://example.com',
  customSlug: 'my-link'
});

console.log(link.shortUrl); // https://lnk.day/my-link
```

**Python**
```python
from lnkday import Client

client = Client(api_key='your_api_key')

# åˆ›å»ºé“¾æ¥
link = client.links.create(
    long_url='https://example.com',
    custom_slug='my-link'
)

print(link.short_url)  # https://lnk.day/my-link
```

**PHP**
```php
use Lnkday\Client;

$client = new Client(['api_key' => 'your_api_key']);

// åˆ›å»ºé“¾æ¥
$link = $client->links->create([
    'long_url' => 'https://example.com',
    'custom_slug' => 'my-link'
]);

echo $link->short_url;  // https://lnk.day/my-link
```

---

## 7. é›†æˆä¸æ‰©å±•

### 7.1 æµè§ˆå™¨æ‰©å±•

**åŠŸèƒ½**
- ä¸€é”®ç¼©çŸ­å½“å‰é¡µé¢ URL
- å³é”®èœå•é›†æˆ
- å†å²è®°å½•åŒæ­¥
- å¿«æ·é”®æ”¯æŒ

**æ”¯æŒæµè§ˆå™¨**
- Chrome / Edge
- Firefox
- Safari

### 7.2 ç§»åŠ¨åº”ç”¨

**iOS / Android App**
- æ‰«ç åˆ›å»ºçŸ­é“¾æ¥
- åˆ†äº«æ‰©å±•ï¼ˆShare Extensionï¼‰
- å°ç»„ä»¶ï¼ˆWidgetï¼‰æ˜¾ç¤ºç»Ÿè®¡
- æ¨é€é€šçŸ¥ï¼ˆé‡è¦æ•°æ®å˜åŒ–ï¼‰

### 7.3 ç¬¬ä¸‰æ–¹é›†æˆ

**Shopify æ’ä»¶**
- è‡ªåŠ¨ä¸ºäº§å“åˆ›å»ºçŸ­é“¾æ¥
- UTM å‚æ•°è‡ªåŠ¨æ·»åŠ 
- è®¢å•è½¬åŒ–è¿½è¸ª

**WordPress æ’ä»¶**
- æ–‡ç« è‡ªåŠ¨ç”ŸæˆçŸ­é“¾æ¥
- ç¤¾äº¤åˆ†äº«æŒ‰é’®é›†æˆ
- ç»Ÿè®¡æ•°æ®åµŒå…¥

**Zapier / Make é›†æˆ**
- è§¦å‘å™¨ï¼šæ–°é“¾æ¥åˆ›å»ºã€ç‚¹å‡»æ•°è¾¾åˆ°é˜ˆå€¼
- åŠ¨ä½œï¼šåˆ›å»ºé“¾æ¥ã€æ›´æ–°é“¾æ¥ã€è·å–ç»Ÿè®¡

---

## é™„å½•

### A. æŠ€æœ¯æ ˆå»ºè®®
- **å‰ç«¯**ï¼šReact / Vue.js + TypeScript
- **åç«¯**ï¼šNode.js (Express) / Go / Python (FastAPI)
- **æ•°æ®åº“**ï¼šPostgreSQLï¼ˆå…³ç³»æ•°æ®ï¼‰+ ClickHouseï¼ˆåˆ†ææ•°æ®ï¼‰
- **ç¼“å­˜**ï¼šRedis
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šKafka / RabbitMQ
- **æœç´¢**ï¼šElasticsearch
- **CDN**ï¼šCloudflare / AWS CloudFront
- **å¯¹è±¡å­˜å‚¨**ï¼šAWS S3 / é˜¿é‡Œäº‘ OSS

### B. æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. çŸ­é“¾è·³è½¬ä½¿ç”¨ CDN è¾¹ç¼˜èŠ‚ç‚¹
2. çƒ­ç‚¹æ•°æ® Redis ç¼“å­˜ï¼ˆTTL 5 åˆ†é’Ÿï¼‰
3. æ•°æ®åº“è¯»å†™åˆ†ç¦»
4. å¼‚æ­¥å¤„ç†ç»Ÿè®¡æ•°æ®å†™å…¥
5. å›¾ç‰‡/äºŒç»´ç  CDN åŠ é€Ÿ
